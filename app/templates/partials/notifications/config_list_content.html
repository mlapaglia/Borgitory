{% if not configs %}
<div class="text-gray-500 dark:text-gray-400 text-sm py-4 text-center">
    <p>No notification configurations.</p>
    <p class="mt-1">Add one using the form above to get notified when backups complete or fail.</p>
</div>
{% else %}
{% for config in configs %}
<div class="border border-gray-600 dark:border-gray-600 rounded-lg p-4 bg-white dark:bg-gray-800 mb-3">
    <div class="flex justify-between items-start mb-2">
        <h4 class="font-medium text-gray-900 dark:text-gray-100">{{ config.name }}</h4>
        <span class="px-2 py-1 text-xs rounded {{ 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300' if config.enabled else 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300' }}">
            {{ 'Enabled' if config.enabled else 'Disabled' }}
        </span>
    </div>
    <p class="text-sm text-gray-600 dark:text-gray-300 mb-1">Provider: {{ config.provider.title() }}</p>
    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Notifications: {{ config.notification_desc }}</p>
    <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
        <span>Created: {{ config.created_at.strftime("%Y-%m-%d") }}</span>
        <div class="space-x-2">
            <button 
                hx-post="/api/notifications/{{ config.id }}/test"
                hx-target="body"
                hx-swap="beforeend"
                hx-indicator="this"
                class="text-blue-600 hover:text-blue-800 [&.htmx-request]:opacity-50">
                <span class="[.htmx-request_&]:hidden">Test</span>
                <span class="hidden [.htmx-request_&]:inline">Testing...</span>
            </button>
            <button 
                hx-post="/api/notifications/{{ config.id }}/{{ 'disable' if config.enabled else 'enable' }}"
                hx-target="body"
                hx-swap="beforeend"
                hx-indicator="this"
                class="text-blue-600 hover:text-blue-800 [&.htmx-request]:opacity-50">
                <span class="[.htmx-request_&]:hidden">{{ 'Disable' if config.enabled else 'Enable' }}</span>
                <span class="hidden [.htmx-request_&]:inline">{{ 'Disabling...' if config.enabled else 'Enabling...' }}</span>
            </button>
            <button 
                hx-delete="/api/notifications/{{ config.id }}"
                hx-target="body"
                hx-swap="beforeend"
                hx-indicator="this"
                hx-confirm="Are you sure you want to delete the notification configuration '{{ config.name }}'?"
                class="text-red-600 hover:text-red-800 [&.htmx-request]:opacity-50">
                <span class="[.htmx-request_&]:hidden">Delete</span>
                <span class="hidden [.htmx-request_&]:inline">Deleting...</span>
            </button>
        </div>
    </div>
</div>
{% endfor %}
{% endif %}